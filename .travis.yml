language: c

dist: xenial
addons:
  apt:
    sources:
      - llvm-toolchain-xenial-8
    packages:
      - clang-8
      - llvm-8-dev

env:
  global:
    - since="5195fdbcd9c318c2fa40463d25046a90ddca549a" LLVM_DIR="/usr/lib/llvm-8/cmake"

# TODO: Building testSlice.c is currently faked. This will be replaced by the slicing tool.
before_script:
  - echo "${since}"
  - ./setupTests.sh
  - cp src/tests/unslicedTests.c src/tests/testSlice.c

script:
  - cmake .
  - make -j4
  - ./src/runTests
